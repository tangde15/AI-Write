# ğŸ’¬ ä¸‰ç«¯ç§ä¿¡åŠŸèƒ½ - æœ€ç»ˆè®¾è®¡æ–¹æ¡ˆ

## ğŸ“ ç•Œé¢å¸ƒå±€ï¼ˆå‚è€ƒä½ æä¾›çš„å›¾ç‰‡ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å·¦ä¾§å¯¼èˆªæ ] â”‚       [ä¸­é—´æ¶ˆæ¯åˆ—è¡¨]  â”‚   [å³ä¾§èŠå¤©çª—å£]        â”‚
â”‚              â”‚                      â”‚                        â”‚
â”‚  éƒ­æ™“æ˜      â”‚  é€šè®¯å½•               â”‚                        â”‚
â”‚  ğŸ” æœç´¢     â”‚  æ”¶ä»¶ç®±               â”‚   ğŸŒŸ                   â”‚
â”‚              â”‚                      â”‚                        â”‚
â”‚  ğŸ“Š é¦–é¡µ     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  ç¾å¥½çš„ä¸€å¤©             â”‚
â”‚  ğŸ’¬ æ¶ˆæ¯(5) â—„â”‚ â”‚ Pythonç¨‹åºè®¾è®¡ â”‚  â”‚  ä»æ²Ÿé€šå¼€å§‹            â”‚
â”‚  ğŸ“ ç¬”è®°     â”‚ â”‚ èƒ¡è¾‰:éšå ‚ç»ƒä¹   â”‚  â”‚                        â”‚
â”‚  ğŸ“š è¯¾ç¨‹     â”‚ â”‚ 1å°æ—¶å‰       â”‚  â”‚                        â”‚
â”‚  â˜ï¸ äº‘ç›˜     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                        â”‚
â”‚  ğŸ‘¥ å°ç»„     â”‚                      â”‚                        â”‚
â”‚  âš™ï¸ è®¾ç½®     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                        â”‚
â”‚              â”‚ â”‚ å­¦ä¹ é€šæ ¡æ‹›  3   â”‚  â”‚                        â”‚
â”‚              â”‚ â”‚ å®ä¹ å’¨è¯¢...     â”‚  â”‚                        â”‚
â”‚              â”‚ â”‚ 8å°æ—¶å‰       â”‚  â”‚                        â”‚
â”‚              â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ è¯¦ç»†å¸ƒå±€è®¾è®¡

### æ•´ä½“ç»“æ„

```vue
<template>
  <div class="messages-container">
    <!-- å·¦ä¾§å¯¼èˆªæ ï¼ˆæ·±è‰²ï¼‰-->
    <div class="left-navbar">
      <!-- é¡¶éƒ¨ï¼šç”¨æˆ·ä¿¡æ¯ -->
      <div class="nav-header">
        <el-avatar>{{ user.username }}</el-avatar>
        <span>{{ user.username }}</span>
      </div>
      
      <!-- æœç´¢æ¡† -->
      <div class="nav-search">
        <el-input prefix-icon="Search" placeholder="æœç´¢" />
        <el-icon @click="clearSearch"><Delete /></el-icon>
        <el-icon @click="newChat"><Plus /></el-icon>
      </div>
      
      <!-- å¯¼èˆªèœå• -->
      <el-menu
        :default-active="activeNav"
        class="nav-menu"
        background-color="#2c3e50"
        text-color="#ecf0f1"
        active-text-color="#3498db"
      >
        <el-menu-item index="home" @click="goToHome">
          <el-icon><HomeFilled /></el-icon>
          <span>é¦–é¡µ</span>
        </el-menu-item>
        
        <el-menu-item index="messages" @click="goToMessages">
          <el-icon><ChatDotRound /></el-icon>
          <span>æ¶ˆæ¯</span>
          <el-badge :value="unreadCount" class="nav-badge" />
        </el-menu-item>
        
        <el-menu-item index="notes">
          <el-icon><Document /></el-icon>
          <span>ç¬”è®°</span>
        </el-menu-item>
        
        <el-menu-item index="courses">
          <el-icon><Reading /></el-icon>
          <span>è¯¾ç¨‹</span>
        </el-menu-item>
        
        <el-menu-item index="cloud">
          <el-icon><FolderOpened /></el-icon>
          <span>äº‘ç›˜</span>
        </el-menu-item>
        
        <el-menu-item index="groups">
          <el-icon><UserFilled /></el-icon>
          <span>å°ç»„</span>
        </el-menu-item>
        
        <el-menu-item index="settings">
          <el-icon><Setting /></el-icon>
          <span>è®¾ç½®</span>
        </el-menu-item>
      </el-menu>
    </div>
    
    <!-- ä¸­é—´ï¼šæ¶ˆæ¯åˆ—è¡¨ï¼ˆç™½è‰²ï¼‰-->
    <div class="middle-list">
      <!-- é¡¶éƒ¨åˆ†ç±» -->
      <div class="list-categories">
        <div class="category-item">
          <el-icon><UserFilled /></el-icon>
          <span>é€šè®¯å½•</span>
        </div>
        <div class="category-item">
          <el-icon><Message /></el-icon>
          <span>æ”¶ä»¶ç®±</span>
        </div>
      </div>
      
      <!-- æ¶ˆæ¯åˆ—è¡¨ -->
      <div class="message-items">
        <div 
          v-for="conversation in conversations" 
          :key="conversation.id"
          class="message-item"
          :class="{ active: selectedConversation?.id === conversation.id }"
          @click="selectConversation(conversation)"
        >
          <!-- å·¦ä¾§å›¾æ ‡ -->
          <div class="message-icon">{{ conversation.partner.icon }}</div>
          
          <!-- ä¸­é—´å†…å®¹ -->
          <div class="message-content">
            <div class="message-title">
              <span>{{ conversation.partner.username }}</span>
              <el-badge :value="conversation.unreadCount" v-if="conversation.unreadCount > 0" />
            </div>
            <div class="message-preview">
              {{ truncateText(conversation.lastMessage.content, 40) }}
            </div>
          </div>
          
          <!-- å³ä¾§æ—¶é—´ -->
          <div class="message-time">
            {{ formatTime(conversation.lastMessage.createdAt) }}
          </div>
        </div>
      </div>
    </div>
    
    <!-- å³ä¾§ï¼šèŠå¤©çª—å£ï¼ˆç™½è‰²ï¼‰-->
    <div class="right-chat">
      <ChatWindow 
        v-if="selectedConversation"
        :conversation="selectedConversation"
        @send="handleSendMessage"
      />
      <EmptyState v-else />
    </div>
  </div>
</template>

<style scoped>
.messages-container {
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* å·¦ä¾§å¯¼èˆªæ  - æ·±è‰²ä¸»é¢˜ */
.left-navbar {
  width: 240px;
  background: #2c3e50;
  color: #ecf0f1;
  display: flex;
  flex-direction: column;
}

.nav-header {
  padding: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
  background: #34495e;
}

.nav-search {
  padding: 15px;
  display: flex;
  gap: 8px;
}

.nav-menu {
  flex: 1;
  border: none;
}

/* ä¸­é—´æ¶ˆæ¯åˆ—è¡¨ */
.middle-list {
  width: 300px;
  background: white;
  border-left: 1px solid #e0e0e0;
  display: flex;
  flex-direction: column;
}

.list-categories {
  padding: 10px;
  display: flex;
  gap: 8px;
  border-bottom: 1px solid #e0e0e0;
}

.category-item {
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
}

.category-item:hover {
  background: #f5f5f5;
}

.message-items {
  flex: 1;
  overflow-y: auto;
}

.message-item {
  padding: 15px;
  border-bottom: 1px solid #f0f0f0;
  display: flex;
  gap: 12px;
  cursor: pointer;
  transition: background 0.2s;
}

.message-item:hover {
  background: #f9f9f9;
}

.message-item.active {
  background: #e3f2fd;
  border-left: 3px solid #2196f3;
}

.message-icon {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  flex-shrink: 0;
}

.message-content {
  flex: 1;
  min-width: 0;
}

.message-title {
  font-weight: 600;
  color: #333;
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.message-preview {
  font-size: 13px;
  color: #666;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.message-time {
  font-size: 12px;
  color: #999;
  flex-shrink: 0;
}

/* å³ä¾§èŠå¤©çª—å£ */
.right-chat {
  flex: 1;
  background: white;
  border-left: 1px solid #e0e0e0;
  display: flex;
  flex-direction: column;
}
</style>
```

---

## ğŸ¯ å…³é”®ç‰¹æ€§

### 1. å·¦ä¾§å¯¼èˆªæ ï¼ˆæ·±è‰²ä¸»é¢˜ï¼‰
- **ç”¨æˆ·ä¿¡æ¯**ï¼šæ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·
- **æœç´¢æ¡†**ï¼šå¿«é€Ÿæœç´¢å¯¹è¯
- **æ–°å»ºå¯¹è¯**ï¼šåŠ å·å›¾æ ‡
- **å¯¼èˆªèœå•**ï¼š
  - ğŸ“Š é¦–é¡µ - è¿”å›å„è‡ªä¸»é¡µ
  - ğŸ’¬ æ¶ˆæ¯ - å½“å‰é¡µé¢ï¼ˆå¸¦æœªè¯»è§’æ ‡ï¼‰
  - ğŸ“ ç¬”è®° - é¢„ç•™åŠŸèƒ½
  - ğŸ“š è¯¾ç¨‹ - é¢„ç•™åŠŸèƒ½
  - â˜ï¸ äº‘ç›˜ - é¢„ç•™åŠŸèƒ½
  - ğŸ‘¥ å°ç»„ - é¢„ç•™åŠŸèƒ½
  - âš™ï¸ è®¾ç½® - é¢„ç•™åŠŸèƒ½

### 2. ä¸­é—´æ¶ˆæ¯åˆ—è¡¨ï¼ˆç™½è‰²èƒŒæ™¯ï¼‰
- **åˆ†ç±»æ ‡ç­¾**ï¼šé€šè®¯å½•ã€æ”¶ä»¶ç®±
- **å¯¹è¯åˆ—è¡¨**ï¼š
  - å·¦ä¾§ï¼šè§’è‰²å›¾æ ‡ï¼ˆåœ†å½¢ï¼‰
  - ä¸­é—´ï¼šç”¨æˆ·å + æ¶ˆæ¯é¢„è§ˆ + æœªè¯»æ•°
  - å³ä¾§ï¼šæ—¶é—´æˆ³
  - æ‚¬åœæ•ˆæœï¼šæµ…ç°èƒŒæ™¯
  - é€‰ä¸­çŠ¶æ€ï¼šè“è‰²å·¦è¾¹æ¡† + æµ…è“èƒŒæ™¯

### 3. å³ä¾§èŠå¤©çª—å£ï¼ˆç™½è‰²èƒŒæ™¯ï¼‰
- **æœªé€‰ä¸­æ—¶**ï¼šæ˜¾ç¤ºç©ºçŠ¶æ€ï¼ˆæ˜Ÿæ˜Ÿemoji + "ç¾å¥½çš„ä¸€å¤©ï¼Œä»æ²Ÿé€šå¼€å§‹"ï¼‰
- **é€‰ä¸­å¯¹è¯å**ï¼šæ˜¾ç¤ºèŠå¤©ç•Œé¢
  - èŠå¤©å¯¹è±¡ä¿¡æ¯
  - æ¶ˆæ¯æ°”æ³¡åˆ—è¡¨
  - è¾“å…¥æ¡† + å‘é€æŒ‰é’®

---

## ğŸ“± å“åº”å¼è®¾è®¡

### æ¡Œé¢ç«¯ï¼ˆâ‰¥1024pxï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¼èˆª â”‚ æ¶ˆæ¯åˆ—è¡¨ â”‚    èŠå¤©çª—å£         â”‚
â”‚ 240pxâ”‚  300px   â”‚     å‰©ä½™ç©ºé—´        â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¹³æ¿ç«¯ï¼ˆ768px - 1024pxï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¯¼èˆª â”‚ æ¶ˆæ¯åˆ—è¡¨ â”‚ èŠå¤©   â”‚
â”‚ 180pxâ”‚  250px   â”‚ é¢„ç•™   â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‰‹æœºç«¯ï¼ˆ<768pxï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¶ˆæ¯åˆ—è¡¨    â”‚  â† ç‚¹å‡»åˆ‡æ¢çª—å£
â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ äº¤äº’æµç¨‹

### 1. è¿›å…¥æ¶ˆæ¯é¡µé¢
```
ç”¨æˆ·ç‚¹å‡»å¯¼èˆªæ "ğŸ’¬ æ¶ˆæ¯" 
  â†“
æ˜¾ç¤ºä¸‰æ å¸ƒå±€ï¼ˆå¯¼èˆª + åˆ—è¡¨ + ç©ºçŠ¶æ€ï¼‰
  â†“
å·¦ä¾§ï¼šé€‰ä¸­"æ¶ˆæ¯"èœå•é¡¹
ä¸­é—´ï¼šæ˜¾ç¤ºæ‰€æœ‰å¯¹è¯åˆ—è¡¨
å³ä¾§ï¼šæ˜¾ç¤ºç©ºçŠ¶æ€æç¤º
```

### 2. é€‰æ‹©å¯¹è¯
```
ç”¨æˆ·ç‚¹å‡»ä¸­é—´åˆ—è¡¨çš„æŸä¸ªå¯¹è¯
  â†“
è¯¥å¯¹è¯é«˜äº®ï¼ˆè“è‰²å·¦è¾¹æ¡†ï¼‰
  â†“
å³ä¾§æ˜¾ç¤ºèŠå¤©çª—å£
  â†“
åŠ è½½å†å²æ¶ˆæ¯
  â†“
å¯ä»¥è¾“å…¥æ¶ˆæ¯å¹¶å‘é€
```

### 3. å‘é€æ¶ˆæ¯
```
ç”¨æˆ·åœ¨å³ä¾§è¾“å…¥æ¡†è¾“å…¥æ¶ˆæ¯
  â†“
ç‚¹å‡»å‘é€æŒ‰é’®
  â†“
ç«‹å³æ˜¾ç¤ºåœ¨èŠå¤©çª—å£ï¼ˆè‡ªå·±çš„æ¶ˆæ¯ï¼Œè“è‰²æ°”æ³¡ï¼‰
  â†“
APIè°ƒç”¨å‘é€åˆ°åç«¯
  â†“
åç«¯ä¿å­˜åˆ°æ•°æ®åº“
```

### 4. æ¥æ”¶æ–°æ¶ˆæ¯
```
å…¶ä»–ç”¨æˆ·å‘é€æ¶ˆæ¯
  â†“
å‰ç«¯è½®è¯¢æˆ–WebSocketæ¨é€
  â†“
æ›´æ–°æœªè¯»æ•°é‡
  â†“
å¦‚æœæ˜¯å½“å‰å¯¹è¯ï¼Œç«‹å³æ˜¾ç¤ºæ–°æ¶ˆæ¯
  â†“
å¦‚æœä¸æ˜¯å½“å‰å¯¹è¯ï¼Œåˆ—è¡¨é¡¹æ˜¾ç¤º"æœªè¯»"çŠ¶æ€
```

---

## ğŸ¨ æ ·å¼ç»†èŠ‚

### æ·±è‰²å¯¼èˆªæ é…è‰²
```css
èƒŒæ™¯è‰²ï¼š#2c3e50
æ–‡å­—è‰²ï¼š#ecf0f1
é€‰ä¸­è‰²ï¼š#3498db
hoverï¼š#34495e
```

### æ¶ˆæ¯é¡¹æ ·å¼
```css
æœªé€‰ä¸­ï¼š
- èƒŒæ™¯ï¼šwhite
- è¾¹æ¡†ï¼š1px solid #f0f0f0
- hoverï¼šbackground #f9f9f9

é€‰ä¸­ï¼š
- èƒŒæ™¯ï¼š#e3f2fd
- å·¦è¾¹æ¡†ï¼š3px solid #2196f3
- æ–‡å­—ï¼šåŠ ç²—
```

### èŠå¤©çª—å£
```css
è‡ªå·±çš„æ¶ˆæ¯ï¼š
- æ°”æ³¡ï¼šè“è‰² #409eff
- å¯¹é½ï¼šå³å¯¹é½
- çŠ¶æ€ï¼šâœ“âœ“ï¼ˆå·²è¯»ï¼‰

å¯¹æ–¹çš„æ¶ˆæ¯ï¼š
- æ°”æ³¡ï¼šç°è‰² #e4e7ed
- å¯¹é½ï¼šå·¦å¯¹é½
```

---

## âœ… å®ç°æ¸…å•

### åç«¯
- [ ] PrivateMessageå®ä½“ç±»
- [ ] PrivateMessageRepository
- [ ] MessageService
- [ ] MessageController
- [ ] DTOç±»ï¼ˆConversationDTO, MessageDTOç­‰ï¼‰

### å‰ç«¯
- [ ] Messages.vueï¼ˆä¸»é¡µé¢ï¼‰
- [ ] ChatWindow.vueï¼ˆèŠå¤©çª—å£ï¼‰
- [ ] EmptyState.vueï¼ˆç©ºçŠ¶æ€ï¼‰
- [ ] æ›´æ–°NavBarç»„ä»¶ï¼ˆæ·»åŠ æ¶ˆæ¯å…¥å£ï¼‰
- [ ] message.jsï¼ˆAPIå°è£…ï¼‰

### æ•°æ®åº“
- [ ] æ·»åŠ private_messageè¡¨
- [ ] æ›´æ–°schema.sql

---

## ğŸš€ é¢„è®¡å®ç°æ—¶é—´

- åç«¯å¼€å‘ï¼š2-3å°æ—¶
- å‰ç«¯å¼€å‘ï¼š3-4å°æ—¶
- æ ·å¼è°ƒè¯•ï¼š1-2å°æ—¶
- æ€»è®¡ï¼š6-9å°æ—¶

---

**ç¡®è®¤åå¼€å§‹å®ç°ï¼** âœ¨

